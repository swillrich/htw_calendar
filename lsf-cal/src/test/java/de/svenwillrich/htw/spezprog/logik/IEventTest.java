/**
 * 
 */
package de.svenwillrich.htw.spezprog.logik;

import java.io.UnsupportedEncodingException;
import java.util.Date;
import java.util.List;

import junit.framework.Assert;

import org.junit.Before;
import org.junit.Test;

import de.svenwillrich.htw.spezprog.model.Event;

/**
 * @author Sven Willrich
 * Spezielle Programmierung: Android
 * Datum: 18.10.2013
 *
 */
public class IEventTest {
	private final static String CAL_CONTENT = "424547494e3a5643414c454e4441520a50524f4449443a5149532d4c53462048495320476d62480a56455253494f4e3a322e300a424547494e3a5654494d455a4f4e450a545a49443a4575726f70652f4265726c696e0a582d4c49432d4c4f434154494f4e3a4575726f70652f4265726c696e0a424547494e3a4441594c494748540a545a4f464653455446524f4d3a2b303130300a545a4f4646534554544f3a2b303230300a545a4e414d453a434553540a445453544152543a3139373030333239543032303030300a5252554c453a465245513d594541524c593b42594441593d2d3153553b42594d4f4e54483d330a454e443a4441594c494748540a424547494e3a5354414e444152440a545a4f464653455446524f4d3a2b303230300a545a4f4646534554544f3a2b303130300a545a4e414d453a4345540a445453544152543a3139373031303235543033303030300a5252554c453a465245513d594541524c593b42594441593d2d3153553b42594d4f4e54483d31300a454e443a5354414e444152440a454e443a5654494d455a4f4e450a4d4554484f443a5055424c4953480a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313330393330543132303030300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313330393330543133333030300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203132340a44545354414d503a3230313331303232543139343831305a0a5549443a38313332343136383336350a4445534352495054494f4e3a0a53554d4d4152593a4232332028535529202d20417263686974656b747572207665727465696c7465722053797374656d652028535529202848656d6c696e67290a43415445474f524945533adc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331323032543133343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331323032543138343530300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203032370a44545354414d503a3230313331303232543139343831305a0a5549443a38353630333137333033370a4445534352495054494f4e3a0a53554d4d4152593a4241434853454d202d204233342042616368656c6f7273656d696e61722f4b6f6c6c6f717569756d202847696e6e6f6c64290a43415445474f524945533a53656d696e61722f50726f6a656b7473656d696e61720a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313430313036543133343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313430313036543138343530300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203032370a44545354414d503a3230313331303232543139343831305a0a5549443a38353630333138303932300a4445534352495054494f4e3a0a53554d4d4152593a4241434853454d202d204233342042616368656c6f7273656d696e61722f4b6f6c6c6f717569756d202847696e6e6f6c64290a43415445474f524945533a53656d696e61722f50726f6a656b7473656d696e61720a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303031543133343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303031543135313530300a4c4f434154494f4e3a5748205447532048617573203162203232380a44545354414d503a3230313331303232543139343831305a0a5549443a38313839383137313730360a4445534352495054494f4e3a0a53554d4d4152593a456e4d335773202d20456e676c69736820666f7220427573696e65737320436f6d707574696e6720284d335773292028576f656765290a43415445474f524945533adc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303038543133343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303038543135313530300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203032350a44545354414d503a3230313331303232543139343831305a0a5549443a38313331363136383337310a4445534352495054494f4e3a0a53554d4d4152593a4233372028535529202d204d61726b6574696e6720284265636b6572290a43415445474f524945533a73656d696e617269737469736368657220556e74657272696368740a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303135543039343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303135543133303030300a5252554c453a465245513d5745454b4c593b554e54494c3d3230313331323033543233353930305a3b494e54455256414c3d313b42594441593d54550a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203031360a44545354414d503a3230313331303232543139343831305a0a5549443a38363433343137353133320a4445534352495054494f4e3a0a53554d4d4152593a456e4f315465202d2052656164696e6720616e6420436f6e766572736174696f6e2020284f3154652920284b61637a6f72656b290a43415445474f524945533adc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303032543039343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303032543131313530300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203032350a44545354414d503a3230313331303232543139343831305a0a5549443a38313331343136393739340a4445534352495054494f4e3a0a53554d4d4152593a4233362028535529202d2050726f6477692e2f4c6f67697374696b2028535529202846616973290a43415445474f524945533a73656d696e617269737469736368657220556e74657272696368740a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303131543039343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303131543137303030300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203031380a44545354414d503a3230313331303232543139343831305a0a5549443a38353538323137323935390a4445534352495054494f4e3a0a53554d4d4152593a5750204957202d204231322e312e31205750313a20496e666f726d6174696f6e7377697274736368616674202853552fdc292028506574657273290a43415445474f524945533a73656d696e617269737469736368657220556e74657272696368742fdc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303131543039343530300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303131543135313530300a5252554c453a465245513d5745454b4c593b554e54494c3d3230313331313232543233353930305a3b494e54455256414c3d313b42594441593d46520a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203230394c0a44545354414d503a3230313331303232543139343831305a0a5549443a38353934363137343137380a4445534352495054494f4e3a0a53554d4d4152593a5750205350202d204233312e33205750323a205370657a69656c6c652050726f6772616d6d696572756e67202842616e6e657274290a43415445474f524945533adc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303138543039303030300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303138543138303030300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203031380a44545354414d503a3230313331303232543139343831305a0a5549443a38353538323138303931350a4445534352495054494f4e3a0a53554d4d4152593a5750204957202d204231322e312e31205750313a20496e666f726d6174696f6e7377697274736368616674202853552fdc292028506574657273290a43415445474f524945533a73656d696e617269737469736368657220556e74657272696368742fdc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331313232543039303030300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331313232543138303030300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203132320a44545354414d503a3230313331303232543139343831305a0a5549443a38353538323138313832390a4445534352495054494f4e3a0a53554d4d4152593a5750204957202d204231322e312e31205750313a20496e666f726d6174696f6e7377697274736368616674202853552fdc292028506574657273290a43415445474f524945533a73656d696e617269737469736368657220556e74657272696368742fdc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331313239543039303030300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331313239543138303030300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203031380a44545354414d503a3230313331303232543139343831305a0a5549443a38353538323138303931330a4445534352495054494f4e3a0a53554d4d4152593a5750204957202d204231322e312e31205750313a20496e666f726d6174696f6e7377697274736368616674202853552fdc292028506574657273290a43415445474f524945533a73656d696e617269737469736368657220556e74657272696368742fdc62756e670a454e443a564556454e540a424547494e3a564556454e540a445453544152543b545a49443d4575726f70652f4265726c696e3a3230313331303035543039303030300a4454454e443b545a49443d4575726f70652f4265726c696e3a3230313331303035543130333030300a4c4f434154494f4e3a547265736b6f77616c6c6565204861757074676562e4756465203032350a44545354414d503a3230313331303232543139343831305a0a5549443a38313539303136393832310a4445534352495054494f4e3a0a53554d4d4152593a4231302e31202d204765736368e466747370726f7a6573736520284d756e6474290a43415445474f524945533adc62756e670a454e443a564556454e540a454e443a5643414c454e4441520a";
	ICal cal = new CalDAO();

	@Before
	public void prepareTests() {
		String str = Utils.fromHexToString(CAL_CONTENT);
		((CalDAO) cal).loadCalendar(str.toString());
	}

	@Test
	public void testGetEvents() {
		List<Event> events = cal.getEvents();
		Assert.assertTrue(events.size() == 13);
	}

	@Test
	public void checkIfElementsThere() {
		Date from = Utils.getDate("01.10.2013 00:00:00");
		Date to = Utils.getDate("01.11.2013 00:00:00");
		List<Event> events = cal.getEventsBetweenDates(from, to);
		Assert.assertTrue(events.size() == 8);
	}

	@Test
	public void checkIfDateCorrect() {
		String expected = "WP SP - B31.3 WP2: Spezielle Programmierung (Bannert)";
		List<Event> list = cal.getEventsFromDate(Utils
				.getDate("25.10.2013 02:00:00"));
		Assert.assertTrue(expected.equals(list.get(0).getTitle()));
	}
}
